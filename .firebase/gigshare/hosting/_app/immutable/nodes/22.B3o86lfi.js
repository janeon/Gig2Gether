import{s as ee,b as h,f as I,g as _,k as U,h as F,d as g,r as O,l as i,i as E,m as u,D as J,v as Q,w as te,c as ae,e as W,E as se,t as le,j as re,F as ne,q as oe}from"../chunks/scheduler.Tn1ca7fi.js";import{S as ie,i as ce,b as N,d as M,m as q,a as G,t as P,e as B}from"../chunks/index.CSvEDU_A.js";import{e as X}from"../chunks/each.BEOo9Sh-.js";import{L as de}from"../chunks/Label.BeoakjBe.js";import{G as ue}from"../chunks/Gallery.DQ92whFR.js";import{U as fe}from"../chunks/UploadSidebar.CwuGyvda.js";import{r as pe,h as me,u as he,i as _e,f as ge,b as $e,d as ve,e as be}from"../chunks/client.Db5mx_yJ.js";import{p as we}from"../chunks/stores.SUmdyQM3.js";function Y(c,t,s){const e=c.slice();return e[8]=t[s].alt,e[9]=t[s].src,e}function Z(c){let t,s,e,a;return{c(){t=h("div"),s=h("img"),a=I(),this.h()},l(r){t=_(r,"DIV",{class:!0});var l=F(t);s=_(l,"IMG",{src:!0,alt:!0,class:!0}),a=U(l),l.forEach(g),this.h()},h(){ne(s.src,e=c[9])||i(s,"src",e),i(s,"alt",c[8]),i(s,"class","object-contain w-full h-full"),i(t,"class","w-full h-70 overflow-hidden")},m(r,l){E(r,t,l),u(t,s),u(t,a)},p:oe,d(r){r&&g(t)}}}function ye(c){let t,s=X(c[2]),e=[];for(let a=0;a<s.length;a+=1)e[a]=Z(Y(c,s,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=W()},l(a){for(let r=0;r<e.length;r+=1)e[r].l(a);t=W()},m(a,r){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,r);E(a,t,r)},p(a,r){if(r&4){s=X(a[2]);let l;for(l=0;l<s.length;l+=1){const f=Y(a,s,l);e[l]?e[l].p(f,r):(e[l]=Z(f),e[l].c(),e[l].m(t.parentNode,t))}for(;l<e.length;l+=1)e[l].d(1);e.length=s.length}},d(a){a&&g(t),se(e,a)}}}function De(c){let t;return{c(){t=le("Upload file")},l(s){t=re(s,"Upload file")},m(s,e){E(s,t,e)},d(s){s&&g(t)}}}function xe(c){let t,s,e,a,r,l,f,v,S,D,n,d,m,b,j,$,H="Select Date",V,w,C,L,z='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',k,R,A;return r=new fe({}),v=new ue({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[ye]},$$scope:{ctx:c}}}),d=new de({props:{class:"pb-2",for:c[1].id,$$slots:{default:[De]},$$scope:{ctx:c}}}),{c(){t=h("link"),s=I(),e=h("div"),a=h("div"),N(r.$$.fragment),l=I(),f=h("div"),N(v.$$.fragment),S=I(),D=h("div"),n=h("div"),N(d.$$.fragment),m=I(),b=h("input"),j=I(),$=h("label"),$.textContent=H,V=I(),w=h("input"),C=I(),L=h("div"),L.innerHTML=z,this.h()},l(o){t=_(o,"LINK",{rel:!0,href:!0}),s=U(o),e=_(o,"DIV",{class:!0});var p=F(e);a=_(p,"DIV",{class:!0});var T=F(a);M(r.$$.fragment,T),T.forEach(g),l=U(p),f=_(p,"DIV",{class:!0});var y=F(f);M(v.$$.fragment,y),S=U(y),D=_(y,"DIV",{class:!0});var K=F(D);n=_(K,"DIV",{class:!0});var x=F(n);M(d.$$.fragment,x),m=U(x),b=_(x,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),j=U(x),$=_(x,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O($)!=="svelte-71nmup"&&($.textContent=H),V=U(x),w=_(x,"INPUT",{id:!0,type:!0,class:!0}),x.forEach(g),K.forEach(g),C=U(y),L=_(y,"DIV",{class:!0,"data-svelte-h":!0}),O(L)!=="svelte-11tx84z"&&(L.innerHTML=z),y.forEach(g),p.forEach(g),this.h()},h(){i(t,"rel","stylesheet"),i(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),i(a,"class","w-1/4"),i(b,"id",c[1].id),i(b,"type","file"),i(b,"autocomplete","off"),i(b,"class","mt-1"),i($,"class","pb-2 mt-4"),i($,"for","date_input"),i(w,"id","date_input"),i(w,"type","date"),i(w,"class","mt-1"),i(n,"class","flex flex-col items-center space-y-4 ml-56"),i(D,"class","flex justify-start mt-6"),i(L,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),i(f,"class","w-3/4 rounded-md p-6"),i(e,"class","flex flex-row")},m(o,p){E(o,t,p),E(o,s,p),E(o,e,p),u(e,a),q(r,a,null),u(e,l),u(e,f),q(v,f,null),u(f,S),u(f,D),u(D,n),q(d,n,null),u(n,m),u(n,b),u(n,j),u(n,$),u(n,V),u(n,w),J(w,c[0]),u(f,C),u(f,L),k=!0,R||(A=[Q(b,"change",c[3]),Q(w,"input",c[4])],R=!0)},p(o,[p]){const T={};p&4096&&(T.$$scope={dirty:p,ctx:o}),v.$set(T);const y={};p&4096&&(y.$$scope={dirty:p,ctx:o}),d.$set(y),p&1&&J(w,o[0])},i(o){k||(G(r.$$.fragment,o),G(v.$$.fragment,o),G(d.$$.fragment,o),k=!0)},o(o){P(r.$$.fragment,o),P(v.$$.fragment,o),P(d.$$.fragment,o),k=!1},d(o){o&&(g(t),g(s),g(e)),B(r),B(v),B(d),R=!1,te(A)}}}function Ie(c,t,s){let e;ae(c,we,n=>s(5,e=n));let a={id:"trip_screenshot"},r=new Date().toISOString().substring(0,10);const l=[{alt:"Uber Trip Screenshot example 1",src:"../trip1.jpg"},{alt:"Uber Trip Screenshot example 2",src:"../trip2.jpg"},{alt:"Uber Trip Screenshot example 3",src:"../trip3.jpg"}];async function f(n){const d=n.target;if(d.files.length>0){const m=d.files[0];await v(m)}}async function v(n){if(n){console.log("File selected for upload:",n.name);try{const d=pe(me,`uploads/${n.name}`);await he(d,n),console.log("File uploaded to storage:",n.name);const m=await _e(d);console.log("File download URL:",m),await S(m,n.name),console.log("File uploaded and metadata saved:",n.name)}catch(d){console.error("Error uploading file:",d)}}else console.error("No file selected")}async function S(n,d){const m=e.data.user;if(!m||!m.uid){console.error("User is not logged in");return}const b=ge($e,"users",m.uid,"uploads"),j=ve(b,`trip_${new Date().getTime()}`),$={name:d,url:n,timestamp:new Date,date:new Date(r)};await be(j,$),console.log("File metadata saved to Firestore:",$)}function D(){r=this.value,s(0,r)}return[r,a,l,f,D]}class Ve extends ie{constructor(t){super(),ce(this,t,Ie,xe,ee,{})}}export{Ve as component};
