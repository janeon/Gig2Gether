import{s as Z,b as h,f as D,g,k as j,h as C,d as _,r as T,l as d,i as L,m as u,v as ee,c as te,e as Q,E as ae,t as se,j as le,F as oe,q as ne}from"../chunks/scheduler.Tn1ca7fi.js";import{S as re,i as ce,b as q,d as G,m as H,a as J,t as z,e as A}from"../chunks/index.CSvEDU_A.js";import{e as W}from"../chunks/each.BEOo9Sh-.js";import{L as ie}from"../chunks/Label.BeoakjBe.js";import{G as de}from"../chunks/Gallery.DQ92whFR.js";import{U as fe}from"../chunks/UploadSidebar.CwuGyvda.js";import{r as ue,h as me,u as pe,i as he,f as ge,b as _e,d as $e,e as ve}from"../chunks/client.Db5mx_yJ.js";import{p as be}from"../chunks/stores.SUmdyQM3.js";function X(c,t,s){const e=c.slice();return e[7]=t[s].alt,e[8]=t[s].src,e}function Y(c){let t,s,e,a;return{c(){t=h("div"),s=h("img"),a=D(),this.h()},l(o){t=g(o,"DIV",{class:!0});var l=C(t);s=g(l,"IMG",{src:!0,alt:!0,class:!0}),a=j(l),l.forEach(_),this.h()},h(){oe(s.src,e=c[8])||d(s,"src",e),d(s,"alt",c[7]),d(s,"class","object-contain w-full h-full"),d(t,"class","w-full h-100 overflow-hidden")},m(o,l){L(o,t,l),u(t,s),u(t,a)},p:ne,d(o){o&&_(t)}}}function we(c){let t,s=W(c[1]),e=[];for(let a=0;a<s.length;a+=1)e[a]=Y(X(c,s,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Q()},l(a){for(let o=0;o<e.length;o+=1)e[o].l(a);t=Q()},m(a,o){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,o);L(a,t,o)},p(a,o){if(o&2){s=W(a[1]);let l;for(l=0;l<s.length;l+=1){const r=X(a,s,l);e[l]?e[l].p(r,o):(e[l]=Y(r),e[l].c(),e[l].m(t.parentNode,t))}for(;l<e.length;l+=1)e[l].d(1);e.length=s.length}},d(a){a&&_(t),ae(e,a)}}}function xe(c){let t;return{c(){t=se("Upload file")},l(s){t=le(s,"Upload file")},m(s,e){L(s,t,e)},d(s){s&&_(t)}}}function ye(c){let t,s,e,a,o,l,r,b,k="After screenshotting your completed job, add screenshots",i,f,$="Here are a couple examples:",E,v,F,U,w,x,M,y,N,I,B='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',V,P,K;return o=new fe({}),v=new de({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[we]},$$scope:{ctx:c}}}),x=new ie({props:{class:"pb-2",for:c[0].id,$$slots:{default:[xe]},$$scope:{ctx:c}}}),{c(){t=h("link"),s=D(),e=h("div"),a=h("div"),q(o.$$.fragment),l=D(),r=h("div"),b=h("p"),b.textContent=k,i=D(),f=h("p"),f.textContent=$,E=D(),q(v.$$.fragment),F=D(),U=h("div"),w=h("div"),q(x.$$.fragment),M=D(),y=h("input"),N=D(),I=h("div"),I.innerHTML=B,this.h()},l(n){t=g(n,"LINK",{rel:!0,href:!0}),s=j(n),e=g(n,"DIV",{class:!0});var m=C(e);a=g(m,"DIV",{class:!0});var S=C(a);G(o.$$.fragment,S),S.forEach(_),l=j(m),r=g(m,"DIV",{class:!0});var p=C(r);b=g(p,"P",{class:!0,"data-svelte-h":!0}),T(b)!=="svelte-1d34xwf"&&(b.textContent=k),i=j(p),f=g(p,"P",{"data-svelte-h":!0}),T(f)!=="svelte-ngnjs6"&&(f.textContent=$),E=j(p),G(v.$$.fragment,p),F=j(p),U=g(p,"DIV",{class:!0});var O=C(U);w=g(O,"DIV",{class:!0});var R=C(w);G(x.$$.fragment,R),M=j(R),y=g(R,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),R.forEach(_),O.forEach(_),N=j(p),I=g(p,"DIV",{class:!0,"data-svelte-h":!0}),T(I)!=="svelte-11tx84z"&&(I.innerHTML=B),p.forEach(_),m.forEach(_),this.h()},h(){d(t,"rel","stylesheet"),d(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),d(a,"class","w-1/4"),d(b,"class","mb-3"),d(y,"id",c[0].id),d(y,"type","file"),d(y,"autocomplete","off"),d(y,"class","mt-1"),d(w,"class","flex flex-col items-center space-y-4 ml-56"),d(U,"class","flex justify-start mt-6"),d(I,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),d(r,"class","w-3/4 rounded-md p-6"),d(e,"class","flex flex-row")},m(n,m){L(n,t,m),L(n,s,m),L(n,e,m),u(e,a),H(o,a,null),u(e,l),u(e,r),u(r,b),u(r,i),u(r,f),u(r,E),H(v,r,null),u(r,F),u(r,U),u(U,w),H(x,w,null),u(w,M),u(w,y),u(r,N),u(r,I),V=!0,P||(K=ee(y,"change",c[2]),P=!0)},p(n,[m]){const S={};m&2048&&(S.$$scope={dirty:m,ctx:n}),v.$set(S);const p={};m&2048&&(p.$$scope={dirty:m,ctx:n}),x.$set(p)},i(n){V||(J(o.$$.fragment,n),J(v.$$.fragment,n),J(x.$$.fragment,n),V=!0)},o(n){z(o.$$.fragment,n),z(v.$$.fragment,n),z(x.$$.fragment,n),V=!1},d(n){n&&(_(t),_(s),_(e)),A(o),A(v),A(x),P=!1,K()}}}function De(c,t,s){let e;te(c,be,i=>s(3,e=i));let a={id:"job_screenshot"},o=new Date().toISOString().substring(0,10);const l=[{alt:"Job Screenshot example 1",src:"../job1.jpg"},{alt:"Job Screenshot example 2",src:"../job2.jpg"},{alt:"Job Screenshot example 3",src:"../job3.jpg"}];async function r(i){const f=i.target;if(f.files.length>0){const $=f.files[0];await b($)}}async function b(i){if(i){console.log("File selected for upload:",i.name);try{const f=ue(me,`uploads/${i.name}`);await pe(f,i),console.log("File uploaded to storage:",i.name);const $=await he(f);console.log("File download URL:",$),await k($,i.name),console.log("File uploaded and metadata saved:",i.name)}catch(f){console.error("Error uploading file:",f)}}else console.error("No file selected")}async function k(i,f){const $=e.data.user;if(!$||!$.uid){console.error("User is not logged in");return}const E=ge(_e,"users",$.uid,"uploads"),v=$e(E,`screenshot_${new Date().getTime()}`),F={name:f,url:i,timestamp:new Date,date:new Date(o)};await ve(v,F),console.log("File metadata saved to Firestore:",F)}return[a,l,r]}class ke extends re{constructor(t){super(),ce(this,t,De,ye,Z,{})}}export{ke as component};
