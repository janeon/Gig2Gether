import{s as he,I as z,G as ne,J as oe,K as D,b as w,g as y,L as re,i as j,v as C,d as p,w as ke,f as L,k as U,h as V,r as ee,l as k,m as f,c as we,e as ie,E as ye,t as te,j as le,n as _e,F as Ie,q as Ce}from"../chunks/scheduler.Tn1ca7fi.js";import{S as ge,i as ve,b as T,d as J,m as K,a as A,t as B,e as O}from"../chunks/index.CSvEDU_A.js";import{e as ce}from"../chunks/each.BEOo9Sh-.js";import{t as fe,g as se,a as be}from"../chunks/bundle-mjs.UUDWr47e.js";import{L as Ee}from"../chunks/Label.BeoakjBe.js";import{I as Fe}from"../chunks/Input.BOCP2mpb.js";import{G as De}from"../chunks/Gallery.DQ92whFR.js";import{U as Pe}from"../chunks/UploadSidebar.CRPbwSa5.js";import{r as Le,h as Ue,u as je,i as Me,f as Ve,b as Ge,d as Ne,e as Re}from"../chunks/client.Db5mx_yJ.js";import{p as Se}from"../chunks/stores.CaxI_0xx.js";function qe(a){let e,t,l,o=[{type:"file"},a[17]],s={};for(let n=0;n<o.length;n+=1)s=z(s,o[n]);return{c(){e=w("input"),this.h()},l(n){e=y(n,"INPUT",{type:!0}),this.h()},h(){re(e,s)},m(n,c){j(n,e,c),e.autofocus&&e.focus(),t||(l=[C(e,"change",a[5]),C(e,"keyup",a[6]),C(e,"keydown",a[7]),C(e,"keypress",a[8]),C(e,"focus",a[9]),C(e,"blur",a[10]),C(e,"click",a[11]),C(e,"mouseover",a[12]),C(e,"mouseenter",a[13]),C(e,"mouseleave",a[14]),C(e,"paste",a[15]),C(e,"change",a[16])],t=!0)},p(n,c){re(e,s=se(o,[{type:"file"},c&131072&&n[17]]))},d(n){n&&p(e),t=!1,ke(l)}}}function He(a){let e,t;const l=[a[3],{class:fe(a[2],a[4].class)}];let o={$$slots:{default:[qe,({props:s})=>({17:s}),({props:s})=>s?131072:0]},$$scope:{ctx:a}};for(let s=0;s<l.length;s+=1)o=z(o,l[s]);return e=new Fe({props:o}),{c(){T(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,n){K(e,s,n),t=!0},p(s,[n]){const c=n&28?se(l,[n&8&&be(s[3]),n&20&&{class:fe(s[2],s[4].class)}]):{};n&393219&&(c.$$scope={dirty:n,ctx:s}),e.$set(c)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){O(e,s)}}}function Te(a,e,t){const l=["value","files","inputClass"];let o=ne(e,l),{value:s=""}=e,{files:n=void 0}=e,{inputClass:c="border !p-0 dark:text-gray-400"}=e;function E(r){D.call(this,a,r)}function S(r){D.call(this,a,r)}function G(r){D.call(this,a,r)}function m(r){D.call(this,a,r)}function u(r){D.call(this,a,r)}function d(r){D.call(this,a,r)}function b(r){D.call(this,a,r)}function N(r){D.call(this,a,r)}function F(r){D.call(this,a,r)}function h(r){D.call(this,a,r)}function P(r){D.call(this,a,r)}function q(){s=this.value,n=this.files,t(0,s),t(1,n)}return a.$$set=r=>{t(4,e=z(z({},e),oe(r))),t(3,o=ne(e,l)),"value"in r&&t(0,s=r.value),"files"in r&&t(1,n=r.files),"inputClass"in r&&t(2,c=r.inputClass)},e=oe(e),[s,n,c,o,e,E,S,G,m,u,d,b,N,F,h,P,q]}class Je extends ge{constructor(e){super(),ve(this,e,Te,He,he,{value:0,files:1,inputClass:2})}}function ue(a,e,t){const l=a.slice();return l[8]=e[t].alt,l[9]=e[t].src,l}function de(a){let e,t,l,o;return{c(){e=w("div"),t=w("img"),o=L(),this.h()},l(s){e=y(s,"DIV",{class:!0});var n=V(e);t=y(n,"IMG",{src:!0,alt:!0,class:!0}),o=U(n),n.forEach(p),this.h()},h(){Ie(t.src,l=a[9])||k(t,"src",l),k(t,"alt",a[8]),k(t,"class","object-contain w-full h-full"),k(e,"class","w-full h-100 overflow-hidden")},m(s,n){j(s,e,n),f(e,t),f(e,o)},p:Ce,d(s){s&&p(e)}}}function Ke(a){let e,t=ce(a[3]),l=[];for(let o=0;o<t.length;o+=1)l[o]=de(ue(a,t,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ie()},l(o){for(let s=0;s<l.length;s+=1)l[s].l(o);e=ie()},m(o,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(o,s);j(o,e,s)},p(o,s){if(s&8){t=ce(o[3]);let n;for(n=0;n<t.length;n+=1){const c=ue(o,t,n);l[n]?l[n].p(c,s):(l[n]=de(c),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(o){o&&p(e),ye(l,o)}}}function Ae(a){let e;return{c(){e=te("Upload file")},l(t){e=le(t,"Upload file")},m(t,l){j(t,e,l)},d(t){t&&p(e)}}}function pe(a){let e,t;return{c(){e=w("p"),t=te(a[0]),this.h()},l(l){e=y(l,"P",{class:!0});var o=V(e);t=le(o,a[0]),o.forEach(p),this.h()},h(){k(e,"class","text-green-600 mt-2")},m(l,o){j(l,e,o),f(e,t)},p(l,o){o&1&&_e(t,l[0])},d(l){l&&p(e)}}}function me(a){let e,t;return{c(){e=w("p"),t=te(a[1]),this.h()},l(l){e=y(l,"P",{class:!0});var o=V(e);t=le(o,a[1]),o.forEach(p),this.h()},h(){k(e,"class","text-red-600 mt-2")},m(l,o){j(l,e,o),f(e,t)},p(l,o){o&2&&_e(t,l[1])},d(l){l&&p(e)}}}function Be(a){let e,t,l,o,s,n,c,E,S="After screenshotting your profile, add screenshots",G,m,u="Here are a couple examples:",d,b,N,F,h,P,q,r,Z,Q,$,R,ae='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',W;s=new Pe({}),b=new De({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[Ke]},$$scope:{ctx:a}}}),P=new Ee({props:{class:"pb-2",for:a[2].id,$$slots:{default:[Ae]},$$scope:{ctx:a}}});const X=[a[2],{autocomplete:"off"}];let x={};for(let i=0;i<X.length;i+=1)x=z(x,X[i]);r=new Je({props:x}),r.$on("change",a[4]);let _=a[0]&&pe(a),g=a[1]&&me(a);return{c(){e=w("link"),t=L(),l=w("div"),o=w("div"),T(s.$$.fragment),n=L(),c=w("div"),E=w("p"),E.textContent=S,G=L(),m=w("p"),m.textContent=u,d=L(),T(b.$$.fragment),N=L(),F=w("div"),h=w("div"),T(P.$$.fragment),q=L(),T(r.$$.fragment),Z=L(),_&&_.c(),Q=L(),g&&g.c(),$=L(),R=w("div"),R.innerHTML=ae,this.h()},l(i){e=y(i,"LINK",{rel:!0,href:!0}),t=U(i),l=y(i,"DIV",{class:!0});var v=V(l);o=y(v,"DIV",{class:!0});var H=V(o);J(s.$$.fragment,H),H.forEach(p),n=U(v),c=y(v,"DIV",{class:!0});var I=V(c);E=y(I,"P",{class:!0,"data-svelte-h":!0}),ee(E)!=="svelte-kkv6sw"&&(E.textContent=S),G=U(I),m=y(I,"P",{"data-svelte-h":!0}),ee(m)!=="svelte-2t45wm"&&(m.textContent=u),d=U(I),J(b.$$.fragment,I),N=U(I),F=y(I,"DIV",{class:!0});var Y=V(F);h=y(Y,"DIV",{class:!0});var M=V(h);J(P.$$.fragment,M),q=U(M),J(r.$$.fragment,M),Z=U(M),_&&_.l(M),Q=U(M),g&&g.l(M),M.forEach(p),Y.forEach(p),$=U(I),R=y(I,"DIV",{class:!0,"data-svelte-h":!0}),ee(R)!=="svelte-mc04fn"&&(R.innerHTML=ae),I.forEach(p),v.forEach(p),this.h()},h(){k(e,"rel","stylesheet"),k(e,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),k(o,"class","w-1/4"),k(E,"class","mb-3"),k(h,"class","flex flex-col items-center space-y-4 ml-56"),k(F,"class","flex justify-start mt-6"),k(R,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),k(c,"class","w-3/4 rounded-md p-6"),k(l,"class","flex flex-row")},m(i,v){j(i,e,v),j(i,t,v),j(i,l,v),f(l,o),K(s,o,null),f(l,n),f(l,c),f(c,E),f(c,G),f(c,m),f(c,d),K(b,c,null),f(c,N),f(c,F),f(F,h),K(P,h,null),f(h,q),K(r,h,null),f(h,Z),_&&_.m(h,null),f(h,Q),g&&g.m(h,null),f(c,$),f(c,R),W=!0},p(i,[v]){const H={};v&4096&&(H.$$scope={dirty:v,ctx:i}),b.$set(H);const I={};v&4096&&(I.$$scope={dirty:v,ctx:i}),P.$set(I);const Y=v&4?se(X,[be(i[2]),X[1]]):{};r.$set(Y),i[0]?_?_.p(i,v):(_=pe(i),_.c(),_.m(h,Q)):_&&(_.d(1),_=null),i[1]?g?g.p(i,v):(g=me(i),g.c(),g.m(h,null)):g&&(g.d(1),g=null)},i(i){W||(A(s.$$.fragment,i),A(b.$$.fragment,i),A(P.$$.fragment,i),A(r.$$.fragment,i),W=!0)},o(i){B(s.$$.fragment,i),B(b.$$.fragment,i),B(P.$$.fragment,i),B(r.$$.fragment,i),W=!1},d(i){i&&(p(e),p(t),p(l)),O(s),O(b),O(P),O(r),_&&_.d(),g&&g.d()}}}function Oe(a,e,t){let l;we(a,Se,m=>t(5,l=m));let o={id:"user_avatar"},s="",n="";const c=[{alt:"Profile Screenshot example 1",src:"../up-profile1.jpg"},{alt:"Profile Screenshot example 2",src:"../up-profile2.jpg"}];function E(m){const u=m.target;if(u.files.length>0){const d=u.files[0];if(!["image/png","image/jpeg"].includes(d.type)){t(1,n="Only PNG or JPEG files are allowed."),t(0,s="");return}t(1,n=""),S({detail:{file:d}})}}async function S(m){const u=m.detail.file;if(u){console.log("File selected for upload:",u.name);try{const d=Le(Ue,`uploads/${u.name}`);await je(d,u),console.log("File uploaded to storage:",u.name);const b=await Me(d);console.log("File download URL:",b),await G(b,u.name),console.log("File uploaded and metadata saved:",u.name),t(0,s="File uploaded successfully!")}catch(d){console.error("Error uploading file:",d),t(0,s=""),t(1,n="Error uploading file.")}}else console.error("No file selected"),t(1,n="No file selected"),t(0,s="")}async function G(m,u){const d=l.data.user;if(!d||!d.uid){console.error("User is not logged in");return}const b=Ve(Ge,"users",d.uid,"uploads"),N=Ne(b,"screenshots"),F={name:u,url:m,timestamp:new Date};await Re(N,F,{merge:!0}),console.log("File metadata saved to Firestore:",F)}return[s,n,o,c,E]}class lt extends ge{constructor(e){super(),ve(this,e,Oe,Be,he,{})}}export{lt as component};
