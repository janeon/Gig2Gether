import{s as re,I as K,G as Z,J as ee,K as I,b as w,g as y,L as te,i as P,v as b,d as g,w as fe,f as U,k as $,h as V,r as W,l as _,m as d,c as de,e as le,E as pe,t as me,j as he,F as _e,q as ge}from"../chunks/scheduler.Tn1ca7fi.js";import{S as ie,i as ce,b as G,d as N,m as q,a as x,t as H,e as T}from"../chunks/index.CSvEDU_A.js";import{e as se}from"../chunks/each.BEOo9Sh-.js";import{t as ae,g as X,a as ue}from"../chunks/bundle-mjs.UUDWr47e.js";import{L as ve}from"../chunks/Label.BeoakjBe.js";import{I as be}from"../chunks/Input.BOCP2mpb.js";import{G as we}from"../chunks/Gallery.DQ92whFR.js";import{U as ye}from"../chunks/UploadSidebar.CwuGyvda.js";import{r as ke,h as Ie,u as Ce,i as De,f as Fe,b as Le,d as Ue,e as $e}from"../chunks/client.Db5mx_yJ.js";import{p as je}from"../chunks/stores.SUmdyQM3.js";function Ee(s){let e,n,a,o=[{type:"file"},s[17]],t={};for(let l=0;l<o.length;l+=1)t=K(t,o[l]);return{c(){e=w("input"),this.h()},l(l){e=y(l,"INPUT",{type:!0}),this.h()},h(){te(e,t)},m(l,i){P(l,e,i),e.autofocus&&e.focus(),n||(a=[b(e,"change",s[5]),b(e,"keyup",s[6]),b(e,"keydown",s[7]),b(e,"keypress",s[8]),b(e,"focus",s[9]),b(e,"blur",s[10]),b(e,"click",s[11]),b(e,"mouseover",s[12]),b(e,"mouseenter",s[13]),b(e,"mouseleave",s[14]),b(e,"paste",s[15]),b(e,"change",s[16])],n=!0)},p(l,i){te(e,t=X(o,[{type:"file"},i&131072&&l[17]]))},d(l){l&&g(e),n=!1,fe(a)}}}function Pe(s){let e,n;const a=[s[3],{class:ae(s[2],s[4].class)}];let o={$$slots:{default:[Ee,({props:t})=>({17:t}),({props:t})=>t?131072:0]},$$scope:{ctx:s}};for(let t=0;t<a.length;t+=1)o=K(o,a[t]);return e=new be({props:o}),{c(){G(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,l){q(e,t,l),n=!0},p(t,[l]){const i=l&28?X(a,[l&8&&ue(t[3]),l&20&&{class:ae(t[2],t[4].class)}]):{};l&393219&&(i.$$scope={dirty:l,ctx:t}),e.$set(i)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ve(s,e,n){const a=["value","files","inputClass"];let o=Z(e,a),{value:t=""}=e,{files:l=void 0}=e,{inputClass:i="border !p-0 dark:text-gray-400"}=e;function k(r){I.call(this,s,r)}function v(r){I.call(this,s,r)}function f(r){I.call(this,s,r)}function u(r){I.call(this,s,r)}function F(r){I.call(this,s,r)}function j(r){I.call(this,s,r)}function m(r){I.call(this,s,r)}function R(r){I.call(this,s,r)}function L(r){I.call(this,s,r)}function C(r){I.call(this,s,r)}function D(r){I.call(this,s,r)}function M(){t=this.value,l=this.files,n(0,t),n(1,l)}return s.$$set=r=>{n(4,e=K(K({},e),ee(r))),n(3,o=Z(e,a)),"value"in r&&n(0,t=r.value),"files"in r&&n(1,l=r.files),"inputClass"in r&&n(2,i=r.inputClass)},e=ee(e),[t,l,i,o,e,k,v,f,u,F,j,m,R,L,C,D,M]}class Re extends ie{constructor(e){super(),ce(this,e,Ve,Pe,re,{value:0,files:1,inputClass:2})}}function ne(s,e,n){const a=s.slice();return a[6]=e[n].alt,a[7]=e[n].src,a}function oe(s){let e,n,a,o;return{c(){e=w("div"),n=w("img"),o=U(),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=V(e);n=y(l,"IMG",{src:!0,alt:!0,class:!0}),o=$(l),l.forEach(g),this.h()},h(){_e(n.src,a=s[7])||_(n,"src",a),_(n,"alt",s[6]),_(n,"class","object-contain w-full h-full"),_(e,"class","w-full h-100 overflow-hidden")},m(t,l){P(t,e,l),d(e,n),d(e,o)},p:ge,d(t){t&&g(e)}}}function Me(s){let e,n=se(s[1]),a=[];for(let o=0;o<n.length;o+=1)a[o]=oe(ne(s,n,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=le()},l(o){for(let t=0;t<a.length;t+=1)a[t].l(o);e=le()},m(o,t){for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(o,t);P(o,e,t)},p(o,t){if(t&2){n=se(o[1]);let l;for(l=0;l<n.length;l+=1){const i=ne(o,n,l);a[l]?a[l].p(i,t):(a[l]=oe(i),a[l].c(),a[l].m(e.parentNode,e))}for(;l<a.length;l+=1)a[l].d(1);a.length=n.length}},d(o){o&&g(e),pe(a,o)}}}function Se(s){let e;return{c(){e=me("Upload file")},l(n){e=he(n,"Upload file")},m(n,a){P(n,e,a)},d(n){n&&g(e)}}}function Ge(s){let e,n,a,o,t,l,i,k,v="After screenshotting your profile, add screenshots",f,u,F="Here are a couple examples:",j,m,R,L,C,D,M,r,O,E,Y='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',A;t=new ye({}),m=new we({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[Me]},$$scope:{ctx:s}}}),D=new ve({props:{class:"pb-2",for:s[0].id,$$slots:{default:[Se]},$$scope:{ctx:s}}});const B=[s[0],{autocomplete:"off"}];let Q={};for(let c=0;c<B.length;c+=1)Q=K(Q,B[c]);return r=new Re({props:Q}),r.$on("change",s[2]),{c(){e=w("link"),n=U(),a=w("div"),o=w("div"),G(t.$$.fragment),l=U(),i=w("div"),k=w("p"),k.textContent=v,f=U(),u=w("p"),u.textContent=F,j=U(),G(m.$$.fragment),R=U(),L=w("div"),C=w("div"),G(D.$$.fragment),M=U(),G(r.$$.fragment),O=U(),E=w("div"),E.innerHTML=Y,this.h()},l(c){e=y(c,"LINK",{rel:!0,href:!0}),n=$(c),a=y(c,"DIV",{class:!0});var p=V(a);o=y(p,"DIV",{class:!0});var S=V(o);N(t.$$.fragment,S),S.forEach(g),l=$(p),i=y(p,"DIV",{class:!0});var h=V(i);k=y(h,"P",{class:!0,"data-svelte-h":!0}),W(k)!=="svelte-kkv6sw"&&(k.textContent=v),f=$(h),u=y(h,"P",{"data-svelte-h":!0}),W(u)!=="svelte-2t45wm"&&(u.textContent=F),j=$(h),N(m.$$.fragment,h),R=$(h),L=y(h,"DIV",{class:!0});var J=V(L);C=y(J,"DIV",{class:!0});var z=V(C);N(D.$$.fragment,z),M=$(z),N(r.$$.fragment,z),z.forEach(g),J.forEach(g),O=$(h),E=y(h,"DIV",{class:!0,"data-svelte-h":!0}),W(E)!=="svelte-mc04fn"&&(E.innerHTML=Y),h.forEach(g),p.forEach(g),this.h()},h(){_(e,"rel","stylesheet"),_(e,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),_(o,"class","w-1/4"),_(k,"class","mb-3"),_(C,"class","flex flex-col items-center space-y-4 ml-56"),_(L,"class","flex justify-start mt-6"),_(E,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),_(i,"class","w-3/4 rounded-md p-6"),_(a,"class","flex flex-row")},m(c,p){P(c,e,p),P(c,n,p),P(c,a,p),d(a,o),q(t,o,null),d(a,l),d(a,i),d(i,k),d(i,f),d(i,u),d(i,j),q(m,i,null),d(i,R),d(i,L),d(L,C),q(D,C,null),d(C,M),q(r,C,null),d(i,O),d(i,E),A=!0},p(c,[p]){const S={};p&1024&&(S.$$scope={dirty:p,ctx:c}),m.$set(S);const h={};p&1024&&(h.$$scope={dirty:p,ctx:c}),D.$set(h);const J=p&1?X(B,[ue(c[0]),B[1]]):{};r.$set(J)},i(c){A||(x(t.$$.fragment,c),x(m.$$.fragment,c),x(D.$$.fragment,c),x(r.$$.fragment,c),A=!0)},o(c){H(t.$$.fragment,c),H(m.$$.fragment,c),H(D.$$.fragment,c),H(r.$$.fragment,c),A=!1},d(c){c&&(g(e),g(n),g(a)),T(t),T(m),T(D),T(r)}}}function Ne(s,e,n){let a;de(s,je,v=>n(3,a=v));let o={id:"user_avatar"};const t=[{alt:"Profile Screenshot example 1",src:"../up-profile1.jpg"},{alt:"Profile Screenshot example 2",src:"../up-profile2.jpg"}];function l(v){const f=v.target;if(f.files.length>0){const u=f.files[0];i({detail:{file:u}})}}async function i(v){const f=v.detail.file;if(f){console.log("File selected for upload:",f.name);try{const u=ke(Ie,`uploads/${f.name}`);await Ce(u,f),console.log("File uploaded to storage:",f.name);const F=await De(u);console.log("File download URL:",F),await k(F,f.name),console.log("File uploaded and metadata saved:",f.name)}catch(u){console.error("Error uploading file:",u)}}else console.error("No file selected")}async function k(v,f){const u=a.data.user;if(!u||!u.uid){console.error("User is not logged in");return}const F=Fe(Le,"users",u.uid,"uploads"),j=Ue(F,"screenshots"),m={name:f,url:v,timestamp:new Date};await $e(j,m,{merge:!0}),console.log("File metadata saved to Firestore:",m)}return[o,t,l]}class Qe extends ie{constructor(e){super(),ce(this,e,Ne,Ge,re,{})}}export{Qe as component};
