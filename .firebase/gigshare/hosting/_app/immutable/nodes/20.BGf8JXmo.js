import{s as oe,b as v,f as k,g as $,k as E,h as U,d as g,r as X,l as c,i as L,m as f,v as re,c as ne,e as Y,E as ie,t as B,j as J,n as ae,F as ce,q as fe}from"../chunks/scheduler.Tn1ca7fi.js";import{S as de,i as ue,b as T,d as q,m as H,a as O,t as z,e as A}from"../chunks/index.CSvEDU_A.js";import{e as Z}from"../chunks/each.BEOo9Sh-.js";import{L as me}from"../chunks/Label.BeoakjBe.js";import{G as pe}from"../chunks/Gallery.DQ92whFR.js";import{U as he}from"../chunks/UploadSidebar.CRPbwSa5.js";import{r as ge,h as _e,u as ve,i as $e,f as we,b as be,d as ye,e as De}from"../chunks/client.Db5mx_yJ.js";import{p as Ie}from"../chunks/stores.CaxI_0xx.js";function ee(r,t,s){const e=r.slice();return e[9]=t[s].alt,e[10]=t[s].src,e}function te(r){let t,s,e,l;return{c(){t=v("div"),s=v("img"),l=k(),this.h()},l(o){t=$(o,"DIV",{class:!0});var a=U(t);s=$(a,"IMG",{src:!0,alt:!0,class:!0}),l=E(a),a.forEach(g),this.h()},h(){ce(s.src,e=r[10])||c(s,"src",e),c(s,"alt",r[9]),c(s,"class","object-contain w-full h-full"),c(t,"class","w-full h-70 overflow-hidden")},m(o,a){L(o,t,a),f(t,s),f(t,l)},p:fe,d(o){o&&g(t)}}}function ke(r){let t,s=Z(r[3]),e=[];for(let l=0;l<s.length;l+=1)e[l]=te(ee(r,s,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=Y()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);t=Y()},m(l,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,o);L(l,t,o)},p(l,o){if(o&8){s=Z(l[3]);let a;for(a=0;a<s.length;a+=1){const d=ee(l,s,a);e[a]?e[a].p(d,o):(e[a]=te(d),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=s.length}},d(l){l&&g(t),ie(e,l)}}}function Ee(r){let t;return{c(){t=B("Upload file")},l(s){t=J(s,"Upload file")},m(s,e){L(s,t,e)},d(s){s&&g(t)}}}function se(r){let t,s;return{c(){t=v("p"),s=B(r[0]),this.h()},l(e){t=$(e,"P",{class:!0});var l=U(t);s=J(l,r[0]),l.forEach(g),this.h()},h(){c(t,"class","text-green-600 mt-2")},m(e,l){L(e,t,l),f(t,s)},p(e,l){l&1&&ae(s,e[0])},d(e){e&&g(t)}}}function le(r){let t,s;return{c(){t=v("p"),s=B(r[1]),this.h()},l(e){t=$(e,"P",{class:!0});var l=U(t);s=J(l,r[1]),l.forEach(g),this.h()},h(){c(t,"class","text-red-600 mt-2")},m(e,l){L(e,t,l),f(t,s)},p(e,l){l&2&&ae(s,e[1])},d(e){e&&g(t)}}}function Fe(r){let t,s,e,l,o,a,d,I,V="After completing a service, take a screenshot of the payment screen and the service details, as shown below:",j,y,u,m,i,D,x,w,N,C,R,P,K='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',M,G,Q;o=new he({}),y=new pe({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[ke]},$$scope:{ctx:r}}}),D=new me({props:{class:"pb-2",for:r[2].id,$$slots:{default:[Ee]},$$scope:{ctx:r}}});let p=r[0]&&se(r),h=r[1]&&le(r);return{c(){t=v("link"),s=k(),e=v("div"),l=v("div"),T(o.$$.fragment),a=k(),d=v("div"),I=v("p"),I.textContent=V,j=k(),T(y.$$.fragment),u=k(),m=v("div"),i=v("div"),T(D.$$.fragment),x=k(),w=v("input"),N=k(),p&&p.c(),C=k(),h&&h.c(),R=k(),P=v("div"),P.innerHTML=K,this.h()},l(n){t=$(n,"LINK",{rel:!0,href:!0}),s=E(n),e=$(n,"DIV",{class:!0});var _=U(e);l=$(_,"DIV",{class:!0});var S=U(l);q(o.$$.fragment,S),S.forEach(g),a=E(_),d=$(_,"DIV",{class:!0});var b=U(d);I=$(b,"P",{class:!0,"data-svelte-h":!0}),X(I)!=="svelte-15xt9gt"&&(I.textContent=V),j=E(b),q(y.$$.fragment,b),u=E(b),m=$(b,"DIV",{class:!0});var W=U(m);i=$(W,"DIV",{class:!0});var F=U(i);q(D.$$.fragment,F),x=E(F),w=$(F,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),N=E(F),p&&p.l(F),C=E(F),h&&h.l(F),F.forEach(g),W.forEach(g),R=E(b),P=$(b,"DIV",{class:!0,"data-svelte-h":!0}),X(P)!=="svelte-11tx84z"&&(P.innerHTML=K),b.forEach(g),_.forEach(g),this.h()},h(){c(t,"rel","stylesheet"),c(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),c(l,"class","w-1/4"),c(I,"class","mb-3"),c(w,"id",r[2].id),c(w,"type","file"),c(w,"autocomplete","off"),c(w,"class","mt-1"),c(i,"class","flex flex-col items-center space-y-4 ml-56"),c(m,"class","flex justify-start mt-6"),c(P,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),c(d,"class","w-3/4 rounded-md p-6"),c(e,"class","flex flex-row")},m(n,_){L(n,t,_),L(n,s,_),L(n,e,_),f(e,l),H(o,l,null),f(e,a),f(e,d),f(d,I),f(d,j),H(y,d,null),f(d,u),f(d,m),f(m,i),H(D,i,null),f(i,x),f(i,w),f(i,N),p&&p.m(i,null),f(i,C),h&&h.m(i,null),f(d,R),f(d,P),M=!0,G||(Q=re(w,"change",r[4]),G=!0)},p(n,[_]){const S={};_&8192&&(S.$$scope={dirty:_,ctx:n}),y.$set(S);const b={};_&8192&&(b.$$scope={dirty:_,ctx:n}),D.$set(b),n[0]?p?p.p(n,_):(p=se(n),p.c(),p.m(i,C)):p&&(p.d(1),p=null),n[1]?h?h.p(n,_):(h=le(n),h.c(),h.m(i,null)):h&&(h.d(1),h=null)},i(n){M||(O(o.$$.fragment,n),O(y.$$.fragment,n),O(D.$$.fragment,n),M=!0)},o(n){z(o.$$.fragment,n),z(y.$$.fragment,n),z(D.$$.fragment,n),M=!1},d(n){n&&(g(t),g(s),g(e)),A(o),A(y),A(D),p&&p.d(),h&&h.d(),G=!1,Q()}}}function Ue(r,t,s){let e;ne(r,Ie,u=>s(5,e=u));let l={id:"service_screenshot"},o="",a="",d=new Date().toISOString().substring(0,10);const I=[{alt:"Profile Screenshot example 1",src:"../rover1.jpg"},{alt:"Profile Screenshot example 2",src:"../rover2.jpg"}];async function V(u){const m=u.target;if(m.files.length>0){const i=m.files[0];if(!["image/png","image/jpeg"].includes(i.type)){s(1,a="Only PNG or JPEG files are allowed."),s(0,o="");return}s(1,a=""),await j(i)}}async function j(u){if(u){console.log("File selected for upload:",u.name);try{const m=ge(_e,`uploads/${u.name}`);await ve(m,u),console.log("File uploaded to storage:",u.name);const i=await $e(m);console.log("File download URL:",i),await y(i,u.name),console.log("File uploaded and metadata saved:",u.name),s(0,o="File uploaded successfully!")}catch(m){console.error("Error uploading file:",m),s(0,o=""),s(1,a="Error uploading file.")}}else console.error("No file selected"),s(1,a="No file selected"),s(0,o="")}async function y(u,m){const i=e.data.user;if(!i||!i.uid){console.error("User is not logged in");return}const D=we(be,"users",i.uid,"uploads"),x=ye(D,`service_${new Date().getTime()}`),w={name:m,url:u,timestamp:new Date,date:new Date(d)};await De(x,w),console.log("File metadata saved to Firestore:",w)}return[o,a,l,I,V]}class Ne extends de{constructor(t){super(),ue(this,t,Ue,Fe,oe,{})}}export{Ne as component};
