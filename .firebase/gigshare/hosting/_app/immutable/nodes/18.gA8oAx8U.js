import{s as oe,b,f as E,g as $,k as I,h as U,d as g,r as X,l as c,i as j,m as f,v as re,c as ne,e as Y,E as ie,t as K,j as O,n as ae,F as ce,q as fe}from"../chunks/scheduler.Tn1ca7fi.js";import{S as ue,i as de,b as T,d as S,m as z,a as B,t as H,e as J}from"../chunks/index.CSvEDU_A.js";import{e as Z}from"../chunks/each.BEOo9Sh-.js";import{L as pe}from"../chunks/Label.BeoakjBe.js";import{G as me}from"../chunks/Gallery.DQ92whFR.js";import{U as he}from"../chunks/UploadSidebar.CRPbwSa5.js";import{r as ge,h as _e,u as ve,i as be,f as $e,b as we,d as ye,e as De}from"../chunks/client.Db5mx_yJ.js";import{p as Ee}from"../chunks/stores.CaxI_0xx.js";function ee(r,t,s){const e=r.slice();return e[8]=t[s].alt,e[9]=t[s].src,e}function te(r){let t,s,e,l;return{c(){t=b("div"),s=b("img"),l=E(),this.h()},l(o){t=$(o,"DIV",{class:!0});var a=U(t);s=$(a,"IMG",{src:!0,alt:!0,class:!0}),l=I(a),a.forEach(g),this.h()},h(){ce(s.src,e=r[9])||c(s,"src",e),c(s,"alt",r[8]),c(s,"class","object-contain w-full h-full"),c(t,"class","w-full h-70 overflow-hidden")},m(o,a){j(o,t,a),f(t,s),f(t,l)},p:fe,d(o){o&&g(t)}}}function Ie(r){let t,s=Z(r[3]),e=[];for(let l=0;l<s.length;l+=1)e[l]=te(ee(r,s,l));return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=Y()},l(l){for(let o=0;o<e.length;o+=1)e[o].l(l);t=Y()},m(l,o){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(l,o);j(l,t,o)},p(l,o){if(o&8){s=Z(l[3]);let a;for(a=0;a<s.length;a+=1){const u=ee(l,s,a);e[a]?e[a].p(u,o):(e[a]=te(u),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=s.length}},d(l){l&&g(t),ie(e,l)}}}function ke(r){let t;return{c(){t=K("Upload file")},l(s){t=O(s,"Upload file")},m(s,e){j(s,t,e)},d(s){s&&g(t)}}}function se(r){let t,s;return{c(){t=b("p"),s=K(r[0]),this.h()},l(e){t=$(e,"P",{class:!0});var l=U(t);s=O(l,r[0]),l.forEach(g),this.h()},h(){c(t,"class","text-green-600 mt-2")},m(e,l){j(e,t,l),f(t,s)},p(e,l){l&1&&ae(s,e[0])},d(e){e&&g(t)}}}function le(r){let t,s;return{c(){t=b("p"),s=K(r[1]),this.h()},l(e){t=$(e,"P",{class:!0});var l=U(t);s=O(l,r[1]),l.forEach(g),this.h()},h(){c(t,"class","text-red-600 mt-2")},m(e,l){j(e,t,l),f(t,s)},p(e,l){l&2&&ae(s,e[1])},d(e){e&&g(t)}}}function Fe(r){let t,s,e,l,o,a,u,D,C="Upload screenshots related to quest options, progress, and details/criteria. Below are a few examples:",P,i,v,d,p,y,L,k,R,M,x,q,A='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',N,G,Q;o=new he({}),i=new me({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[Ie]},$$scope:{ctx:r}}}),y=new pe({props:{class:"pb-2",for:r[2].id,$$slots:{default:[ke]},$$scope:{ctx:r}}});let m=r[0]&&se(r),h=r[1]&&le(r);return{c(){t=b("link"),s=E(),e=b("div"),l=b("div"),T(o.$$.fragment),a=E(),u=b("div"),D=b("p"),D.textContent=C,P=E(),T(i.$$.fragment),v=E(),d=b("div"),p=b("div"),T(y.$$.fragment),L=E(),k=b("input"),R=E(),m&&m.c(),M=E(),h&&h.c(),x=E(),q=b("div"),q.innerHTML=A,this.h()},l(n){t=$(n,"LINK",{rel:!0,href:!0}),s=I(n),e=$(n,"DIV",{class:!0});var _=U(e);l=$(_,"DIV",{class:!0});var V=U(l);S(o.$$.fragment,V),V.forEach(g),a=I(_),u=$(_,"DIV",{class:!0});var w=U(u);D=$(w,"P",{class:!0,"data-svelte-h":!0}),X(D)!=="svelte-zjl7f1"&&(D.textContent=C),P=I(w),S(i.$$.fragment,w),v=I(w),d=$(w,"DIV",{class:!0});var W=U(d);p=$(W,"DIV",{class:!0});var F=U(p);S(y.$$.fragment,F),L=I(F),k=$(F,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),R=I(F),m&&m.l(F),M=I(F),h&&h.l(F),F.forEach(g),W.forEach(g),x=I(w),q=$(w,"DIV",{class:!0,"data-svelte-h":!0}),X(q)!=="svelte-11tx84z"&&(q.innerHTML=A),w.forEach(g),_.forEach(g),this.h()},h(){c(t,"rel","stylesheet"),c(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),c(l,"class","w-1/4"),c(D,"class","mb-3"),c(k,"id",r[2].id),c(k,"type","file"),c(k,"autocomplete","off"),c(k,"class","mt-1"),c(p,"class","flex flex-col items-center space-y-4 ml-56"),c(d,"class","flex justify-start mt-6"),c(q,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),c(u,"class","w-3/4 rounded-md p-6"),c(e,"class","flex flex-row")},m(n,_){j(n,t,_),j(n,s,_),j(n,e,_),f(e,l),z(o,l,null),f(e,a),f(e,u),f(u,D),f(u,P),z(i,u,null),f(u,v),f(u,d),f(d,p),z(y,p,null),f(p,L),f(p,k),f(p,R),m&&m.m(p,null),f(p,M),h&&h.m(p,null),f(u,x),f(u,q),N=!0,G||(Q=re(k,"change",r[4]),G=!0)},p(n,[_]){const V={};_&4096&&(V.$$scope={dirty:_,ctx:n}),i.$set(V);const w={};_&4096&&(w.$$scope={dirty:_,ctx:n}),y.$set(w),n[0]?m?m.p(n,_):(m=se(n),m.c(),m.m(p,M)):m&&(m.d(1),m=null),n[1]?h?h.p(n,_):(h=le(n),h.c(),h.m(p,null)):h&&(h.d(1),h=null)},i(n){N||(B(o.$$.fragment,n),B(i.$$.fragment,n),B(y.$$.fragment,n),N=!0)},o(n){H(o.$$.fragment,n),H(i.$$.fragment,n),H(y.$$.fragment,n),N=!1},d(n){n&&(g(t),g(s),g(e)),J(o),J(i),J(y),m&&m.d(),h&&h.d(),G=!1,Q()}}}function Ue(r,t,s){let e;ne(r,Ee,i=>s(5,e=i));let l={id:"quest_screenshot"},o="",a="";const u=[{alt:"ubersc4",src:"../quest4.jpg"},{alt:"ubersc3",src:"../quest3.jpg"},{alt:"ubersc2",src:"../quest2.jpg"},{alt:"ubersc1",src:"../quest1.png"}];async function D(i){const v=i.target;if(v.files.length>0){const d=v.files[0];if(!["image/png","image/jpeg"].includes(d.type)){s(1,a="Only PNG or JPEG files are allowed."),s(0,o="");return}s(1,a=""),await C(d)}}async function C(i){if(i){console.log("File selected for upload:",i.name);try{const v=ge(_e,`uploads/${i.name}`);await ve(v,i),console.log("File uploaded to storage:",i.name);const d=await be(v);console.log("File download URL:",d),await P(d,i.name),console.log("File uploaded and metadata saved:",i.name),s(0,o="File uploaded successfully!")}catch(v){console.error("Error uploading file:",v),s(0,o=""),s(1,a="Error uploading file.")}}else console.error("No file selected"),s(1,a="No file selected"),s(0,o="")}async function P(i,v){const d=e.data.user;if(!d||!d.uid){console.error("User is not logged in");return}const p=$e(we,"users",d.uid,"uploads"),y=ye(p,`quest_${new Date().getTime()}`),L={name:v,url:i,timestamp:new Date,date:new Date};await De(y,L),console.log("File metadata saved to Firestore:",L)}return[o,a,l,u,D]}class Re extends ue{constructor(t){super(),de(this,t,Ue,Fe,oe,{})}}export{Re as component};
