import{s as W,b as v,f as I,g as $,k as F,h as U,d as h,r as B,l as f,i as L,m as u,v as X,c as Y,e as K,E as Z,t as ee,j as te,F as ae,q as se}from"../chunks/scheduler.Tn1ca7fi.js";import{S as le,i as oe,b as P,d as M,m as N,a as T,t as q,e as G}from"../chunks/index.CSvEDU_A.js";import{e as O}from"../chunks/each.BEOo9Sh-.js";import{L as re}from"../chunks/Label.BeoakjBe.js";import{G as ne}from"../chunks/Gallery.DQ92whFR.js";import{U as ie}from"../chunks/UploadSidebar.CwuGyvda.js";import{r as ce,h as de,u as fe,i as ue,f as me,b as pe,d as he,e as ge}from"../chunks/client.Db5mx_yJ.js";import{p as _e}from"../chunks/stores.SUmdyQM3.js";function J(i,t,s){const e=i.slice();return e[7]=t[s].alt,e[8]=t[s].src,e}function Q(i){let t,s,e,a;return{c(){t=v("div"),s=v("img"),a=I(),this.h()},l(o){t=$(o,"DIV",{class:!0});var l=U(t);s=$(l,"IMG",{src:!0,alt:!0,class:!0}),a=F(l),l.forEach(h),this.h()},h(){ae(s.src,e=i[8])||f(s,"src",e),f(s,"alt",i[7]),f(s,"class","object-contain w-full h-full"),f(t,"class","w-full h-70 overflow-hidden")},m(o,l){L(o,t,l),u(t,s),u(t,a)},p:se,d(o){o&&h(t)}}}function ve(i){let t,s=O(i[1]),e=[];for(let a=0;a<s.length;a+=1)e[a]=Q(J(i,s,a));return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=K()},l(a){for(let o=0;o<e.length;o+=1)e[o].l(a);t=K()},m(a,o){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(a,o);L(a,t,o)},p(a,o){if(o&2){s=O(a[1]);let l;for(l=0;l<s.length;l+=1){const c=J(a,s,l);e[l]?e[l].p(c,o):(e[l]=Q(c),e[l].c(),e[l].m(t.parentNode,t))}for(;l<e.length;l+=1)e[l].d(1);e.length=s.length}},d(a){a&&h(t),Z(e,a)}}}function $e(i){let t;return{c(){t=ee("Upload file")},l(s){t=te(s,"Upload file")},m(s,e){L(s,t,e)},d(s){s&&h(t)}}}function we(i){let t,s,e,a,o,l,c,b,E="After completing a service, take a screenshot of the payment screen and the service details, as shown below:",d,n,p,x,w,g,V,y,C,D,H='<i class="fas fa-play fa-2x mr-2"></i> <span>Learn more on how to add files or enter details</span>',j,R,z;return o=new ie({}),n=new ne({props:{class:"gap-2 grid grid-cols-4",$$slots:{default:[ve]},$$scope:{ctx:i}}}),g=new re({props:{class:"pb-2",for:i[0].id,$$slots:{default:[$e]},$$scope:{ctx:i}}}),{c(){t=v("link"),s=I(),e=v("div"),a=v("div"),P(o.$$.fragment),l=I(),c=v("div"),b=v("p"),b.textContent=E,d=I(),P(n.$$.fragment),p=I(),x=v("div"),w=v("div"),P(g.$$.fragment),V=I(),y=v("input"),C=I(),D=v("div"),D.innerHTML=H,this.h()},l(r){t=$(r,"LINK",{rel:!0,href:!0}),s=F(r),e=$(r,"DIV",{class:!0});var m=U(e);a=$(m,"DIV",{class:!0});var k=U(a);M(o.$$.fragment,k),k.forEach(h),l=F(m),c=$(m,"DIV",{class:!0});var _=U(c);b=$(_,"P",{class:!0,"data-svelte-h":!0}),B(b)!=="svelte-15xt9gt"&&(b.textContent=E),d=F(_),M(n.$$.fragment,_),p=F(_),x=$(_,"DIV",{class:!0});var A=U(x);w=$(A,"DIV",{class:!0});var S=U(w);M(g.$$.fragment,S),V=F(S),y=$(S,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),S.forEach(h),A.forEach(h),C=F(_),D=$(_,"DIV",{class:!0,"data-svelte-h":!0}),B(D)!=="svelte-11tx84z"&&(D.innerHTML=H),_.forEach(h),m.forEach(h),this.h()},h(){f(t,"rel","stylesheet"),f(t,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"),f(a,"class","w-1/4"),f(b,"class","mb-3"),f(y,"id",i[0].id),f(y,"type","file"),f(y,"autocomplete","off"),f(y,"class","mt-1"),f(w,"class","flex flex-col items-center space-y-4 ml-56"),f(x,"class","flex justify-start mt-6"),f(D,"class","flex items-center mt-4 ml-49 text-black cursor-pointer"),f(c,"class","w-3/4 rounded-md p-6"),f(e,"class","flex flex-row")},m(r,m){L(r,t,m),L(r,s,m),L(r,e,m),u(e,a),N(o,a,null),u(e,l),u(e,c),u(c,b),u(c,d),N(n,c,null),u(c,p),u(c,x),u(x,w),N(g,w,null),u(w,V),u(w,y),u(c,C),u(c,D),j=!0,R||(z=X(y,"change",i[2]),R=!0)},p(r,[m]){const k={};m&2048&&(k.$$scope={dirty:m,ctx:r}),n.$set(k);const _={};m&2048&&(_.$$scope={dirty:m,ctx:r}),g.$set(_)},i(r){j||(T(o.$$.fragment,r),T(n.$$.fragment,r),T(g.$$.fragment,r),j=!0)},o(r){q(o.$$.fragment,r),q(n.$$.fragment,r),q(g.$$.fragment,r),j=!1},d(r){r&&(h(t),h(s),h(e)),G(o),G(n),G(g),R=!1,z()}}}function be(i,t,s){let e;Y(i,_e,d=>s(3,e=d));let a={id:"service_screenshot"},o=new Date().toISOString().substring(0,10);const l=[{alt:"Profile Screenshot example 1",src:"../rover1.jpg"},{alt:"Profile Screenshot example 2",src:"../rover2.jpg"}];async function c(d){const n=d.target;if(n.files.length>0){const p=n.files[0];await b(p)}}async function b(d){if(d){console.log("File selected for upload:",d.name);try{const n=ce(de,`uploads/${d.name}`);await fe(n,d),console.log("File uploaded to storage:",d.name);const p=await ue(n);console.log("File download URL:",p),await E(p,d.name),console.log("File uploaded and metadata saved:",d.name)}catch(n){console.error("Error uploading file:",n)}}else console.error("No file selected")}async function E(d,n){const p=e.data.user;if(!p||!p.uid){console.error("User is not logged in");return}const x=me(pe,"users",p.uid,"uploads"),w=he(x,`service_${new Date().getTime()}`),g={name:n,url:d,timestamp:new Date,date:new Date(o)};await ge(w,g),console.log("File metadata saved to Firestore:",g)}return[a,l,c]}class Ee extends le{constructor(t){super(),oe(this,t,be,we,W,{})}}export{Ee as component};
