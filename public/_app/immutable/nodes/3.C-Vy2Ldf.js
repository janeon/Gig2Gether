import{s as G,a as H,n as M,r as J,c as K,b as Q}from"../chunks/scheduler.DCWCPtl2.js";import{S as X,i as Y,s as k,e as y,k as Z,d as v,f as P,c as w,a as C,l as x,m,g as S,h as _,n as I,o as V,p as O,q as $,r as ee,t as W,b as z,j as te,u as se}from"../chunks/index.Bb8AvSvR.js";import{e as j}from"../chunks/each.D6YF6ztN.js";import{g as ae}from"../chunks/entry.2zjSjI6B.js";import{s as le,a as re}from"../chunks/firebase.client.BYc3_XmI.js";import{a as A}from"../chunks/authstore.BtnQcdCW.js";function B(r,s,a){const e=r.slice();return e[12]=s[a],e}function F(r){let s,a=r[12]+"",e,l;return{c(){s=y("option"),e=W(a),l=k(),this.h()},l(i){s=w(i,"OPTION",{});var o=C(s);e=z(o,a),l=P(o),o.forEach(v),this.h()},h(){s.__value=r[12],I(s,s.__value)},m(i,o){S(i,s,o),_(s,e),_(s,l)},p:M,d(i){i&&v(s)}}}function R(r){let s,a=r[4].message+"",e;return{c(){s=y("div"),e=W(a),this.h()},l(l){s=w(l,"DIV",{class:!0});var i=C(s);e=z(i,a),i.forEach(v),this.h()},h(){m(s,"class","p-8 text-red-500 bg-red-100")},m(l,i){S(l,s,i),_(s,e)},p(l,i){i&16&&a!==(a=l[4].message+"")&&te(e,a)},d(l){l&&v(s)}}}function oe(r){let s,a,e,l,i,o,b,d,E,f,U="Login",T,q,N,h=j(r[5]),u=[];for(let t=0;t<h.length;t+=1)u[t]=F(B(r,h,t));let c=!r[3]&&r[3]!==void 0&&R(r);return{c(){s=k(),a=y("div"),e=y("form"),l=y("input"),i=k(),o=y("input"),b=k(),d=y("select");for(let t=0;t<u.length;t+=1)u[t].c();E=k(),f=y("button"),f.textContent=U,T=k(),c&&c.c(),this.h()},l(t){Z("svelte-1bel8ov",document.head).forEach(v),s=P(t),a=w(t,"DIV",{class:!0});var n=C(a);e=w(n,"FORM",{class:!0});var p=C(e);l=w(p,"INPUT",{type:!0,placeholder:!0,class:!0}),i=P(p),o=w(p,"INPUT",{type:!0,placeholder:!0,class:!0}),b=P(p),d=w(p,"SELECT",{placeholder:!0});var D=C(d);for(let L=0;L<u.length;L+=1)u[L].l(D);D.forEach(v),E=P(p),f=w(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(f)!=="svelte-107onqb"&&(f.textContent=U),T=P(p),c&&c.l(p),p.forEach(v),n.forEach(v),this.h()},h(){document.title="Login",m(l,"type","email"),m(l,"placeholder","Email"),m(l,"class","px-4 py-2 border border-gray-300 rounded-md"),l.required=!0,m(o,"type","password"),m(o,"placeholder","Password"),m(o,"class","px-4 py-2 border border-gray-300 rounded-md"),o.required=!0,m(d,"placeholder","Sign in as"),d.required=!0,r[2]===void 0&&H(()=>r[9].call(d)),m(f,"type","submit"),m(f,"class","default-action"),m(e,"class","flex flex-col gap-4 p-8 space-y-4 bg-white sm:w-6/12"),m(a,"class","flex flex-col items-center")},m(t,g){S(t,s,g),S(t,a,g),_(a,e),_(e,l),I(l,r[0]),_(e,i),_(e,o),I(o,r[1]),_(e,b),_(e,d);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(d,null);V(d,r[2],!0),_(e,E),_(e,f),_(e,T),c&&c.m(e,null),q||(N=[O(l,"input",r[7]),O(o,"input",r[8]),O(d,"change",r[9]),O(e,"submit",$(r[6]))],q=!0)},p(t,[g]){if(g&1&&l.value!==t[0]&&I(l,t[0]),g&2&&o.value!==t[1]&&I(o,t[1]),g&32){h=j(t[5]);let n;for(n=0;n<h.length;n+=1){const p=B(t,h,n);u[n]?u[n].p(p,g):(u[n]=F(p),u[n].c(),u[n].m(d,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=h.length}g&36&&V(d,t[2]),!t[3]&&t[3]!==void 0?c?c.p(t,g):(c=R(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:M,o:M,d(t){t&&(v(s),v(a)),ee(u,t),c&&c.d(),q=!1,J(N)}}}function ne(r,s,a){let e;K(r,A,h=>a(10,e=h));const l=[{type:"auth/user-not-found",message:"This email is not registered. Please register first or try again with a different email."},{type:"auth/wrong-password",message:"The password you entered is incorrect. Please try again."}],i=["worker","policymaker"];let o,b,d,E,f={type:"",message:""};const U=()=>{le(re,o,b).then(h=>{Q(A,e={uid:h.user.uid,email:h.user.email||"",role:d},e),ae("/protected")}).catch(h=>{const u=h.code,c=l.find(t=>t.type===u);c?a(4,f=c):a(4,f={type:"unknown",message:"There was an error logging in. Please try again."}),a(3,E=!1)})};function T(){o=this.value,a(0,o)}function q(){b=this.value,a(1,b)}function N(){d=se(this),a(2,d),a(5,i)}return[o,b,d,E,f,i,U,T,q,N]}class fe extends X{constructor(s){super(),Y(this,s,ne,oe,G,{})}}export{fe as component};
